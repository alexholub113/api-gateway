{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "Proxy": {
    "TimeoutSeconds": 30,
    "MaxRetries": 3,
    "RetryDelayMs": 1000,
    "UseExponentialBackoff": true,
    "CircuitBreakerFailureThreshold": 5,
    "CircuitBreakerSamplingDurationSeconds": 30,
    "CircuitBreakerBreakDurationSeconds": 60,
    "PreserveHostHeader": false,
    "ExcludedHeaders": [
      "Host",
      "Connection",
      "Transfer-Encoding",
      "Upgrade",
      "Proxy-Connection",
      "Proxy-Authorization"
    ]
  },
  "LoadBalancing": {
    "DefaultStrategy": "RoundRobin",
    "HealthCheckIntervalSeconds": 30,
    "HealthCheckTimeoutSeconds": 5,
    "MaxConsecutiveFailures": 3,
    "UnhealthyRetryDelaySeconds": 60
  },
  "ServiceRouting": {
    "RoutePrefix": "route",
    "Routes": [
      {
        "ServiceId": "target-service",
        "TargetService": "target-service",
        "Methods": [ "GET", "POST", "PUT", "DELETE", "PATCH", "HEAD", "OPTIONS" ],
        "AuthPolicy": null,
        "RateLimitPolicy": null,
        "CachePolicy": null,
        "LoadBalancingStrategy": "RoundRobin",
        "Timeout": "00:00:30"
      },
      {
        "ServiceId": "user-service",
        "TargetService": "user-service",
        "Methods": [ "GET", "POST", "PUT", "DELETE", "PATCH" ],
        "AuthPolicy": "RequireAuth",
        "RateLimitPolicy": "strict",
        "CachePolicy": null,
        "LoadBalancingStrategy": "WeightedRoundRobin",
        "Timeout": "00:00:15"
      }
    ]
  },
  "Services": {
    "Services": [
      {
        "Name": "target-service",
        "Instances": [
          {
            "Url": "https://localhost:7069",
            "Weight": 1
          }
        ],
        "HealthCheck": {
          "Path": "/health",
          "Interval": "00:00:30",
          "Timeout": "00:00:05"
        }
      },
      {
        "Name": "user-service",
        "Instances": [
          {
            "Url": "https://api1.users.com",
            "Weight": 2
          },
          {
            "Url": "https://api2.users.com",
            "Weight": 1
          }
        ],
        "HealthCheck": {
          "Path": "/health",
          "Interval": "00:00:30",
          "Timeout": "00:00:05"
        }
      }
    ]
  }
}
